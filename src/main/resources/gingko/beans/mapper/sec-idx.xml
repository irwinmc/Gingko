<!DOCTYPE mapper
		PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.gingko.app.persist.mapper.SecIdxMapper">

	<resultMap id="secIdxMap" type="org.gingko.app.persist.domain.SecIdx">
		<result property="cik" column="cik"/>
		<result property="companyName" column="company_name"/>
		<result property="formType" column="form_type"/>
		<result property="dateField" column="date_field"/>
		<result property="fileName" column="file_name"/>
		<result property="fillingHtmlUrl" column="filling_html_url"/>
		<result property="siid" column="siid"/>
		<result property="date" column="date"/>
        <result property="state" column="state"/>
        <result property="operator" column="operator"/>
	</resultMap>

	<select id="select" resultMap="secIdxMap">
		select * from gingko.gk_sec_idx
	</select>

    <select id="selectByPage" resultMap="secIdxMap">
		select * from gingko.gk_sec_idx where "date"=#{date}
        <if test="state!=-1" > and "state"=#{state} </if>
        <if test="formTypes!= null" > and "form_type" in
            <foreach item="item" index="index" collection="formTypes"
                     open="(" separator="," close=")">
                #{item}
            </foreach>
        </if> order by "siid" limit #{limit} offset #{offset}
	</select>

    <select id="selectTotalCount" resultType="int">
        select count(*) from gingko.gk_sec_idx where "date"=#{date}
        <if test="state!=-1" > and "state"=#{state} </if>
        <if test="formTypes!= null" > and "form_type" in
            <foreach item="item" index="index" collection="formTypes"
                     open="(" separator="," close=")">
                #{item}
            </foreach>
        </if>
    </select>

	<select id="selectByDate" parameterType="String" resultMap="secIdxMap">
		select * from gingko.gk_sec_idx where "date"=#{date}
	</select>

	<select id="selectBySiid" parameterType="String" resultMap="secIdxMap">
		select * from gingko.gk_sec_idx where "siid"=#{siid}
	</select>

    <update id="update">
		update gingko.gk_sec_idx set "state"=#{state}, "operator"=#{operator} where "siid"=#{siid}
	</update>

    <insert id="insert">
		insert into gingko.gk_sec_idx (
			"cik", "company_name", "form_type", "date_field", "file_name", "filling_html_url", "siid", "date", "state", "operator"
		) values (
			#{cik}, #{companyName}, #{formType}, #{dateField}, #{fileName},
			#{fillingHtmlUrl}, #{siid}, #{date}, #{state}, #{operator}
		)
	</insert>

	<insert id="insertList" parameterType="java.util.List">
		insert into gingko.gk_sec_idx (
			"cik", "company_name", "form_type", "date_field", "file_name", "filling_html_url", "siid", "date", "state", "operator"
		) values
		<foreach collection="list" item="item" index="index" open="(" separator="),(" close=")">
			#{item.cik}, #{item.companyName}, #{item.formType}, #{item.dateField}, #{item.fileName},
			#{item.fillingHtmlUrl}, #{item.siid}, #{item.date}, #{item.state}, #{item.operator}
		</foreach>
	</insert>

	<delete id="delete">
		delete from gingko.gk_sec_idx
	</delete>

	<delete id="deleteByDate" parameterType="String">
		delete from gingko.gk_sec_idx where "date"=#{date}
	</delete>

</mapper>